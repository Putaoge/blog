<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Function Component | 葡萄哥的Blog</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="logo.jpeg">
    <meta name="description" content="葡萄哥的學習記錄">
    
    <link rel="preload" href="/blog/assets/css/0.styles.cea178bd.css" as="style"><link rel="preload" href="/blog/assets/js/app.aecd4755.js" as="script"><link rel="preload" href="/blog/assets/js/2.8521d118.js" as="script"><link rel="preload" href="/blog/assets/js/3.7672de95.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.366d327b.js"><link rel="prefetch" href="/blog/assets/js/11.88b7ce57.js"><link rel="prefetch" href="/blog/assets/js/12.db80494d.js"><link rel="prefetch" href="/blog/assets/js/13.276a7f8a.js"><link rel="prefetch" href="/blog/assets/js/14.2be283c5.js"><link rel="prefetch" href="/blog/assets/js/15.d88e0f9f.js"><link rel="prefetch" href="/blog/assets/js/16.c9ba40c9.js"><link rel="prefetch" href="/blog/assets/js/17.afe8c82a.js"><link rel="prefetch" href="/blog/assets/js/18.dd21db60.js"><link rel="prefetch" href="/blog/assets/js/19.b68e4d10.js"><link rel="prefetch" href="/blog/assets/js/20.6f9bc09e.js"><link rel="prefetch" href="/blog/assets/js/21.ee8434e1.js"><link rel="prefetch" href="/blog/assets/js/22.9aa269d3.js"><link rel="prefetch" href="/blog/assets/js/23.b543e6d4.js"><link rel="prefetch" href="/blog/assets/js/24.3fd15c49.js"><link rel="prefetch" href="/blog/assets/js/25.4c73d932.js"><link rel="prefetch" href="/blog/assets/js/4.11f76de3.js"><link rel="prefetch" href="/blog/assets/js/5.a37c3396.js"><link rel="prefetch" href="/blog/assets/js/6.3b29df05.js"><link rel="prefetch" href="/blog/assets/js/7.215f472f.js"><link rel="prefetch" href="/blog/assets/js/8.cb3a702d.js"><link rel="prefetch" href="/blog/assets/js/9.47a51e61.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.cea178bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">葡萄哥的Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learning/" class="nav-link router-link-active">
  學習
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="葡萄 JavaScript 博客" class="dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="葡萄 JavaScript 博客" class="mobile-dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Putaoge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learning/" class="nav-link router-link-active">
  學習
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="葡萄 JavaScript 博客" class="dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="葡萄 JavaScript 博客" class="mobile-dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Putaoge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>瀏覽器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React-初學</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/" class="sidebar-link">1. 開始學習React</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/2.Class-Component/" class="sidebar-link">2. Class-Component</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/3.%E4%BA%8B%E4%BB%B6%E8%99%95%E7%90%86/" class="sidebar-link">3. 事件處理</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/4.props%E8%A3%9C%E5%85%85/" class="sidebar-link">4. props補充</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/5.ref/" class="sidebar-link">5. ref</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/6.%E6%95%B8%E6%93%9A%E5%82%B3%E9%81%9E/" class="sidebar-link">6. 數據傳遞</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/7.Composition/" class="sidebar-link">7. Composition</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/8.%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/" class="sidebar-link">8. 生命週期</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/" aria-current="page" class="active sidebar-link">9.Function-Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#function-component-2" class="sidebar-link">Function Component</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#實際應用-function-component" class="sidebar-link">實際應用 Function Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#props" class="sidebar-link">Props</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#props的類型限制" class="sidebar-link">Props的類型限制</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#state" class="sidebar-link">State</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#ref" class="sidebar-link">Ref</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#事件處理" class="sidebar-link">事件處理</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/#context傳遞數據" class="sidebar-link">Context傳遞數據</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="function-component"><a href="#function-component" class="header-anchor">#</a> Function Component</h1> <p>目前我們已經學習了 Class Component 的寫法, 本篇文章將記錄另一種的Component寫法: <strong>Function Component</strong></p> <h2 id="function-component-2"><a href="#function-component-2" class="header-anchor">#</a> Function Component</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Function Component 最簡單的範例就是直接撰寫一個 JavaScript 的函式，並且在該函式中帶入 props 的參數之後回傳一個 JSX 撰寫的 React.element 。
所以之所以稱之為 Function Component 的原因，其實就是因為它本身就是一個 JavaScript Function 了。</p> <h2 id="實際應用-function-component"><a href="#實際應用-function-component" class="header-anchor">#</a> 實際應用 Function Component</h2> <p>寫出一個 Function Component 之後，我們應該要如何將它應用在 React DOM 上使其渲染出畫面呢？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用的方法和 Class Component 相同, 只需要通過 createRoot 創建一個 root, 然後呼叫 render 即可完成渲染, 此時頁面中會顯示 &quot;Hello&quot;</p> <div class="custom-block warning"><p class="custom-block-title">注意：Component 的字首須為大寫字母</p> <p>React 會將小寫字母開頭的組件視為原始 DOM 標籤，舉例來說，</p><div></div> 就會被視為是 HTML 的 div 標籤，但是 <Welcome></Welcome> 則是一個 component，而且需要在作用域中使用 Welcome。<p></p></div> <h3 id="props"><a href="#props" class="header-anchor">#</a> Props</h3> <ul><li>元件首標籤屬性進行傳遞數據至子元件</li> <li>函式元件通過形參進行接收父元件傳遞的數據</li></ul> <p>當 React 看到由使用者定義 component 的 element 時，它將 JSX 屬性和 children 作為 single object 傳遞給該 component。我們稱這個 object 為「props」。</p> <p>舉例來說，這段程式碼會在頁面上 render 出「Hello, Sara」：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>讓我們來複習一下這個例子發生了什麼事：</p> <ul><li>我們對 <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> 這個 element 呼叫了 <code>root.render()</code>。</li> <li>React 以 {name: 'Sara'} 作為 props 傳入 Welcome component 並呼叫。</li> <li>Welcome component 回傳了 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> 這個 element 作為返回值。</li> <li>React DOM 有效的將 DOM 更新為 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>。</li></ul> <h3 id="props的類型限制"><a href="#props的類型限制" class="header-anchor">#</a> Props的類型限制</h3> <ul><li>第一步: 引入</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>npmjs<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">/</span>prop<span class="token operator">-</span>types
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>與Class Component的使用方式基本相同, 但不能使用 static 的簡寫寫法, 必須寫在函式外面:</p> <ul><li>添加類型判斷</li></ul> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Child name <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">999</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Parent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>

Child<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string <span class="token comment">// 限定 name屬性 的值類型為 string類型</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>此時會報錯: Warning: Failed prop type: Invalid prop <code>name</code> of type <code>number</code> supplied to <code>Child</code>, expected <code>string</code>. =&gt; 因為我們限定了 Child 元件接收的 props 屬性應該為 string, 所以傳輸 {999} 時會提示錯誤</p> <h3 id="state"><a href="#state" class="header-anchor">#</a> State</h3> <p>和 Class Component 一樣, 在元件中直接修改自己定義並傳入子元件的數據, 並不會導致UI的更新:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token literal-property property">Child內</span><span class="token operator">:</span> 
            <span class="token punctuation">{</span>
                props<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span>第<span class="token punctuation">{</span>item<span class="token punctuation">}</span>個<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>點點<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token literal-property property">Parent內</span><span class="token operator">:</span> 
            <span class="token punctuation">{</span>
                arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span>第<span class="token punctuation">{</span>item<span class="token punctuation">}</span>個<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Child arr<span class="token operator">=</span><span class="token punctuation">{</span>arr<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>雖然我們將 arr陣列 傳入了 Child子元件, 但更改arr陣列的數據並不會刷新UI:
<img src="/blog/assets/img/CANTupdateUI.cea72b7a.gif" alt="cantupdate"></p> <p>只有通過 State 來存儲數據, 才會觸發UI的更新, 而如同之前文章內提到的: 直接修改 State 數據同樣無法更新UI, 需要藉助其他 API 來達到數據更新時, 畫面也更新的效果; 在 <code>Class Component</code> 內我們可以直接宣告 State數據但不能更新, 更新時使用的是: <strong>setState</strong>; 而在 <code>Function Component</code> 中, 我們不能直接宣告State數據, 必須使用 <strong><code>useState</code></strong> 來增加 React state 到 function component;</p> <h4 id="宣告一個-state-變數"><a href="#宣告一個-state-變數" class="header-anchor">#</a> 宣告一個 State 變數</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用前需要先引入</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token operator">=</span> React <span class="token comment">// html文件中</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span> <span class="token comment">// js文件中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用:</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 宣告一個新的 state 變數，我們稱作為「count」。</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>This is an example<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>呼叫 useState 做了什麼</strong>？它宣告了一個「state 變數」。我們的變數叫做 <code>count</code>，也可以有其他稱呼，像是 <code>banana</code>。這是一個在 function 呼叫中「保留」變數的方法－useState 就像是 class 中 <code>this.state</code> 的功能一樣。一般情況下，變數會在 function 結束時「消失」，但 state 變數會被 React 保留起來。</p> <p><strong>我們傳入什麼參數給 useState</strong>？唯一需要傳入 <code>useState()</code> Hook 的參數就是 state 的起始值。不像 class，這個 state 不需要是一個 object。我們可以使用我們所需的 number 或是 string。在範例中，我們只需要一個 number 記錄使用者點擊了多少次，所以我們傳入 0 來當作起始值。（如果要在 state 儲存兩個不同的值，可以呼叫 <code>useState()</code> 兩次。）</p> <p><strong>useState 回傳了什麼</strong>？它回傳了一對值：目前的 state 跟一個可以更新 state 的 function。這就是為什麼我們寫 <code>const [count, setCount] = useState()</code> 的原因。除了你是直接拿到一對，這跟 class 中的 <code>this.state.count</code> 和 <code>this.setState</code> 很類似。</p> <p>所以這個範例實際上做了這些事:</p> <ol><li>我們宣告了一個叫做 count 的 state 變數，並將起始值設成了 0。</li> <li>React 在 re-render 間會記住目前的值，並將它提供給我們的 function。</li> <li>如果我們需要更新目前的 count，我們可以呼叫 setCount。</li></ol> <h5 id="要用-setcount-count-1-還是-setcount-prev-prev-1"><a href="#要用-setcount-count-1-還是-setcount-prev-prev-1" class="header-anchor">#</a> 要用 setCount(count + 1) 還是 setCount(prev =&gt; prev + 1) ?</h5> <ul><li><p>更新 state 的函式可以丟兩種參數</p> <ul><li>Pass the state, Run Everytime. eg. setCount(count + 1)</li> <li>Pass the function, Run only the very first time when your component render. eg. setCount(prev =&gt; prev + 1)</li></ul></li></ul> <p>兩種都可以用，但需要了解其中有什麼不同，若懶得了解那建議用後者可以減少出錯機會。以下先出一道題:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A: '</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token comment">// ?</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">B</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'B: '</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token comment">// ?</span>
<span class="token punctuation">}</span>
<span class="token comment">// Answer</span>
<span class="token comment">// A: 5</span>
<span class="token comment">// B 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在 A 裡面第二個 setCount會覆蓋第一個，因為他們抓的 count 都是 4，但若是用 function version 來設定 state 就會記住 prevState 再去做運算
另外 Pass the state 是每一次都會重新跑，而 Pass the function 只會跑第一次</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>prevSate<span class="token punctuation">,</span> <span class="token literal-property property">count</span><span class="token operator">:</span> prevSate<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {count: 5, name: 'blue'}</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> prevSate<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {count: 5} name 消失，因為他會整個覆蓋掉</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="讀取-state"><a href="#讀取-state" class="header-anchor">#</a> 讀取 State</h4> <p>在 class 中我們要顯示目前的計數，我們使用 <code>this.state.count</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 function 中，我們可以直接使用 count：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="更新-state"><a href="#更新-state" class="header-anchor">#</a> 更新 State</h4> <p>在 class 中，我們需要呼叫 <code>this.setState()</code> 來更新 <code>count</code> state：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    Click me
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在 function 中，我們已經有 <code>setCount</code> 和 <code>count</code> 變數，所以我們不需要 this：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    Click me
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>接下來, 我們將之前的實例更改為:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token literal-property property">Child內</span><span class="token operator">:</span> 
            <span class="token punctuation">{</span>
                props<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span>第<span class="token punctuation">{</span>item<span class="token punctuation">}</span>個<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>arr<span class="token punctuation">,</span> setArr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setArr</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>點點<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token literal-property property">Parent內</span><span class="token operator">:</span> 
            <span class="token punctuation">{</span>
                arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span>第<span class="token punctuation">{</span>item<span class="token punctuation">}</span>個<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Child arr<span class="token operator">=</span><span class="token punctuation">{</span>arr<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>完成!
<img src="/blog/assets/img/useState.a44fc03f.gif" alt="useState"></p> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> Ref</h3> <p>當程式大起來，網頁中的元素很多，當想要用原始DOM api去操作元素時，卻還要用document.querySelector或是document.getElementById去整個網頁找，就顯得很不直覺。</p> <p>能不能直接在JSX中取得元素的reference，直接操作元素本身呢 ?</p> <p>也就是說，理想上我們希望做這種事情</p> <p>用一個變數去綁在元素的props上，然後就能讓該變數等於綁定元素的reference</p> <p>大概是這樣(實際上當然不能直接這樣做):</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">InputForm</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> accountRef <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> passwordRef <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> refArr <span class="token operator">=</span> <span class="token punctuation">[</span>accountRef<span class="token punctuation">,</span>passwordRef<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input 
                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> 
                name<span class="token operator">=</span><span class="token string">&quot;account&quot;</span>
                ref<span class="token operator">=</span><span class="token punctuation">{</span>accountRef<span class="token punctuation">}</span> 
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input 
                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> 
                name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                ref<span class="token operator">=</span><span class="token punctuation">{</span>passwordRef<span class="token punctuation">}</span> 
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                refArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&quot; is &quot;</span><span class="token operator">+</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>過去，React在class component中的確有提供 <code>React.createRef()</code> 這個API來創造一個<strong>可以讓你綁在<code>ref</code>這個props上</strong>的object變數。讓你能直接拿到該元素本身、直接用原始DOM方式操作元素。</p> <p>但是這個API如果直接拿到function component來用會有問題。原因是<code>React.createRef()</code>;通常只會在class component的建構子呼叫一次，這樣就能確保這個創造出來的reference指向的是同一個地址。然而function component<strong>沒有建構子</strong>，每次都一定會重新呼叫function component的定義域，這樣等於每次都會重新創造一次這個object變數，賦予值被重新初始化，指向的reference也會不一樣了。
為了解決這個問題，React提供了另一個React hook - <strong><code>useRef</code></strong></p> <h4 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h4> <p><code>useRef</code>是一個函式，跟<code>useState</code>一樣接收一個參數，作為變數初始值。差別是<code>useRef</code>回傳的是一個物件，裡面只有一個屬性<code>current</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token string">&quot;初始資料&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment">// { current: &quot;初始資料&quot; }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>React會確保 <strong><code>useRef</code></strong> 回傳出來的這個物件不會因為React元件更新而被重新創造。也就是說在你初始化過後，這個物件會始終指向同一個reference。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>請注意雖然物件本身指向位置一樣，但如果你重新assign物件中current屬性裡面的值，那current對應的value指向的東西就會不一樣。</p></div> <p>也就是說剛剛的「理想」只要引入<code>useRef</code>後，只要先創造要綁在input的props <code>ref</code>上的變數，綁定之後，<code>變數名稱.current</code>就會是該input元素本身，我們就能用直覺的方式操作DOM元素了!</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">InputForm</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 建立用來綁定input的變數</span>
    <span class="token keyword">const</span> accountRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> passwordRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 為了方便操作，建立一個array來管理這些ref</span>
    <span class="token keyword">const</span> refArr <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">[</span>accountRef<span class="token punctuation">,</span>passwordRef<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span> <span class="token comment">// 將剛剛創立的變數綁在對應的位置</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token literal-property property">帳號</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input
                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                name<span class="token operator">=</span><span class="token string">&quot;account&quot;</span>
                ref<span class="token operator">=</span><span class="token punctuation">{</span>accountRef<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token literal-property property">密碼</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input
                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                ref<span class="token operator">=</span><span class="token punctuation">{</span>passwordRef<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                refArr<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>current<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>效果:
<img src="/blog/assets/img/inputRef.f4302ce1.gif" alt="inputRef"></p> <h4 id="forwardref-父元件獲取子元件的dom元素"><a href="#forwardref-父元件獲取子元件的dom元素" class="header-anchor">#</a> forwardRef - 父元件獲取子元件的DOM元素</h4> <p>有些時候父層的元件希望能夠取得子層的 DOM 元素（例如，<code>button</code> 或 <code>input</code>），以便能夠在父層控制子層 DOM 元素的 focus, selection 或 animation 的效果。這時就可以使用 <strong><code>forwardRef</code></strong> 來讓父層取得子層 DOM 元素，以便控制和操作它。</p> <p>如果我們直接通過 <strong>useRef</strong> 的返回值綁定子元件, 例如:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Kaya</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是子元件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Tzuyu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> KayaRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span> <span class="token comment">// 將剛剛創立的變數綁在對應的位置</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Kaya ref<span class="token operator">=</span><span class="token punctuation">{</span>KayaRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>KayaRef<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>點擊查看ref<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>此時控制台會報錯:
<img src="/blog/assets/img/useRefWarning.06fe339d.png" alt="useRefWarning">
此時點擊 button 會得到: <code>{current: undefined}</code></p> <p>提示我們必須使用 <strong>forwardRef</strong> 才能在父元件中給子元件設置 Ref</p> <h5 id="forwardref-基本使用"><a href="#forwardref-基本使用" class="header-anchor">#</a> forwardRef 基本使用:</h5> <p>和上方的示例基本一致, 差別在於我們需要給子元件使用 <strong>forwardRef</strong></p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> Kaya <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>我是子元件的div<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">Tzuyu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> KayaRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span> <span class="token comment">// 將剛剛創立的變數綁在對應的位置</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Kaya ref<span class="token operator">=</span><span class="token punctuation">{</span>KayaRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>KayaRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>點擊查看ref<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>此時點擊 button , 控制台內會輸出: <code>&lt;div&gt;我是子元件的div&lt;/div&gt;</code>, 證明我們在父元件中成功獲取到子元件中的div元素DOM節點</p> <h3 id="事件處理"><a href="#事件處理" class="header-anchor">#</a> 事件處理</h3> <p>Function Component 的事件處理與 Class Component 是相同的, 點擊跳轉⚠️ (但需要記得 function component 中沒有this指向的問題)</p> <h3 id="context傳遞數據"><a href="#context傳遞數據" class="header-anchor">#</a> Context傳遞數據</h3> <p>Function Component 通過Context傳遞數據與 Class Component 基本一致, 但有些許不同:</p> <h4 id="context-consumer"><a href="#context-consumer" class="header-anchor">#</a> Context.Consumer</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token comment">/* 基於 context 值進行渲染*/</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>一個 React 組件可以訂閱 context 的變更，此組件可以讓你在函數式組件中可以訂閱 context。</p> <p>這種方法需要一個函式作為子元素（function as a child）。這個函式接收當前的 context 值，並返回一個 React 節點。傳遞給函式的 <code>value</code> 值等價於元件樹上方離這個 context 最近的 Provider 提供的 <code>value</code> 值。如果沒有對應的 Provider，<code>value</code> 參數等同於傳遞給 <code>createContext()</code> 的 <code>defaultValue</code>。</p> <ul><li>基礎使用:</li></ul> <div class="language-js {1,7, 14} line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> Tzu <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">Kaya</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            我是子元件的div <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token literal-property property">接收的數據</span><span class="token operator">:</span> <span class="token punctuation">{</span> props<span class="token punctuation">.</span>value <span class="token punctuation">}</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Tzuyu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Tzu<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token string">'子瑜傳遞的數據'</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Tzu<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>
                        <span class="token parameter">value</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Kaya value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Tzu<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Tzu<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Tzuyu <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>在 <code>Kaya子元件</code> 中, props.value的值為 <code>Tzu.Provider</code> 傳入的value值: &quot;子瑜傳遞的數據&quot;,</p> <ul><li>如果 <code>Tzu.Provider</code> 沒有傳入數據的話, 將會使用 <code>createContext(value)</code> 時填入的value值作為子元件得到的數據</li></ul> <p>巢狀Provider:</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">let</span> Tzu <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">Kaya</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            我是子元件的div <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token literal-property property">接收的數據</span><span class="token operator">:</span> <span class="token punctuation">{</span> props<span class="token punctuation">.</span>value <span class="token punctuation">}</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Tzuyu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Tzu<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token string">'子瑜傳遞的第一條數據'</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Tzu<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token string">'子瑜傳遞的第二條數據'</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Tzu<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
                        <span class="token punctuation">{</span>
                            <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                                <span class="token keyword">return</span> <span class="token operator">&lt;</span>Kaya value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Tzu<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Tzu<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Tzu<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.aecd4755.js" defer></script><script src="/blog/assets/js/2.8521d118.js" defer></script><script src="/blog/assets/js/3.7672de95.js" defer></script>
  </body>
</html>
