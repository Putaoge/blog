<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>開始學習 React 啦!! | 葡萄哥的Blog</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="logo.jpeg">
    <meta name="description" content="葡萄哥的學習記錄">
    
    <link rel="preload" href="/blog/assets/css/0.styles.cea178bd.css" as="style"><link rel="preload" href="/blog/assets/js/app.aecd4755.js" as="script"><link rel="preload" href="/blog/assets/js/2.8521d118.js" as="script"><link rel="preload" href="/blog/assets/js/4.11f76de3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.366d327b.js"><link rel="prefetch" href="/blog/assets/js/11.88b7ce57.js"><link rel="prefetch" href="/blog/assets/js/12.db80494d.js"><link rel="prefetch" href="/blog/assets/js/13.276a7f8a.js"><link rel="prefetch" href="/blog/assets/js/14.2be283c5.js"><link rel="prefetch" href="/blog/assets/js/15.d88e0f9f.js"><link rel="prefetch" href="/blog/assets/js/16.c9ba40c9.js"><link rel="prefetch" href="/blog/assets/js/17.afe8c82a.js"><link rel="prefetch" href="/blog/assets/js/18.dd21db60.js"><link rel="prefetch" href="/blog/assets/js/19.b68e4d10.js"><link rel="prefetch" href="/blog/assets/js/20.6f9bc09e.js"><link rel="prefetch" href="/blog/assets/js/21.ee8434e1.js"><link rel="prefetch" href="/blog/assets/js/22.9aa269d3.js"><link rel="prefetch" href="/blog/assets/js/23.b543e6d4.js"><link rel="prefetch" href="/blog/assets/js/24.3fd15c49.js"><link rel="prefetch" href="/blog/assets/js/25.4c73d932.js"><link rel="prefetch" href="/blog/assets/js/3.7672de95.js"><link rel="prefetch" href="/blog/assets/js/5.a37c3396.js"><link rel="prefetch" href="/blog/assets/js/6.3b29df05.js"><link rel="prefetch" href="/blog/assets/js/7.215f472f.js"><link rel="prefetch" href="/blog/assets/js/8.cb3a702d.js"><link rel="prefetch" href="/blog/assets/js/9.47a51e61.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.cea178bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">葡萄哥的Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learning/" class="nav-link router-link-active">
  學習
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="葡萄 JavaScript 博客" class="dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="葡萄 JavaScript 博客" class="mobile-dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Putaoge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/learning/" class="nav-link router-link-active">
  學習
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="葡萄 JavaScript 博客" class="dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="葡萄 JavaScript 博客" class="mobile-dropdown-title"><span class="title">葡萄 JavaScript 博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Putaoge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>瀏覽器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React-初學</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/" aria-current="page" class="active sidebar-link">1. 開始學習React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#什麼是-react" class="sidebar-link">什麼是 React ?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#通過-cdn-載入-react-和-react-dom" class="sidebar-link">通過 CDN 載入 React 和 React DOM</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#react-最簡單的範例" class="sidebar-link">React 最簡單的範例</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#virtual-dom-虛擬-dom" class="sidebar-link">Virtual DOM (虛擬 DOM)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#虛擬dom的介紹" class="sidebar-link">虛擬DOM的介紹</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#jsx語法" class="sidebar-link">JSX語法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#需要知道的事情" class="sidebar-link">需要知道的事情:</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#render-element" class="sidebar-link">Render Element</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#render-element-到-dom-內" class="sidebar-link">Render Element 到 DOM 內</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#更新被-render-的-element" class="sidebar-link">更新被 Render 的 Element</a></li><li class="sidebar-sub-header"><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/1.%E9%96%8B%E5%A7%8B%E5%AD%B8%E7%BF%92React/#react-只更新必要的-element" class="sidebar-link">React 只更新必要的 Element</a></li></ul></li></ul></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/2.Class-Component/" class="sidebar-link">2. Class-Component</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/3.%E4%BA%8B%E4%BB%B6%E8%99%95%E7%90%86/" class="sidebar-link">3. 事件處理</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/4.props%E8%A3%9C%E5%85%85/" class="sidebar-link">4. props補充</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/5.ref/" class="sidebar-link">5. ref</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/6.%E6%95%B8%E6%93%9A%E5%82%B3%E9%81%9E/" class="sidebar-link">6. 數據傳遞</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/7.Composition/" class="sidebar-link">7. Composition</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/8.%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/" class="sidebar-link">8. 生命週期</a></li><li><a href="/blog/learning/React-%E5%88%9D%E5%AD%B8/9.Function-Component/" class="sidebar-link">9.Function-Component</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="開始學習-react-啦"><a href="#開始學習-react-啦" class="header-anchor">#</a> 開始學習 React 啦!!</h1> <h2 id="什麼是-react"><a href="#什麼是-react" class="header-anchor">#</a> 什麼是 React ?</h2> <p><strong><code>React</code></strong>（也稱為 <strong><code>React.js</code></strong> 或 <strong><code>ReactJS</code></strong>）是一個自由及開放原始碼的前端JavaScript<code>工具庫</code>，用於基於UI元件構建使用者介面。
<strong><code>React</code></strong> 是用來實作使用者介面的 JavaScript <strong><code>函式庫</code></strong>
它由Meta（前身為Facebook）和由個人開發者和公司組成的社群維護。 <strong><code>React</code></strong> 可用作開發具有 <strong><code>Next.js</code></strong> 等框架的單頁、手機或伺服器彩現應用程式的基礎。然而，<strong><code>React</code></strong> 只專注狀態管理和將狀態彩現到<code>DOM</code>，因此建立 <strong><code>React</code></strong> 應用程式通常需要使用額外的工具庫來進行路由實作，以及某些客戶端功能。</p> <h3 id="通過-cdn-載入-react-和-react-dom"><a href="#通過-cdn-載入-react-和-react-dom" class="header-anchor">#</a> 通過 CDN 載入 React 和 React DOM</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. cdn方式載入React核心庫</span>
<span class="token operator">&lt;</span>script crossorigin src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 2. cdn方式載入React核心庫</span>
<span class="token operator">&lt;</span>script crossorigin src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 為什麼要使用 crossorigin Attribute?</span>
<span class="token comment">// =&gt; 因為這是官網建議的: 👇🏻</span>
<span class="token operator">&lt;</span>script crossorigin src<span class="token operator">=</span><span class="token string">&quot;...&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 官網也建議我們去驗證所使用的 CDN 是否設定了 Access-Control-Allow-Origin: *</span>

<span class="token comment">// 3. 載入JSX語法</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>


<span class="token comment">// 4. 在新的 &lt;script&gt; 標籤裡加上 type=&quot;text/babel&quot; 的 attribute, 即可在這個 script 裡使用 JSX</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>我們可以透過加入 type=&quot;text/babel&quot; attribute 在任何 <code>&lt;script&gt;</code> tag 中使用 <code>JSX</code>
這種方式最適合用來學習和建立簡單的示範。然而，它會令你的網頁變慢，而且並不適合發佈到線上環境。</p></div> <h3 id="react-最簡單的範例"><a href="#react-最簡單的範例" class="header-anchor">#</a> React 最簡單的範例</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// react 代碼書寫位置, 顯示頁面</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ReactDOM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {…}, createPortal: ƒ, createRoot: ƒ, findDOMNode: ƒ, flushSync: ƒ, …}</span>

    <span class="token comment">// 傳入真實的 DOM節點 , 通過 ReactDOM.createRoot 將 React 元素渲染到頁面中</span>
    <span class="token keyword">let</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 綁定 id 為 root 的盒子</span>

    <span class="token comment">// React 渲染頁面</span>
    root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>起步<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 此時頁面中的呈現效果:</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>起步<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="virtual-dom-虛擬-dom"><a href="#virtual-dom-虛擬-dom" class="header-anchor">#</a> Virtual DOM (虛擬 DOM)</h2> <p>在傳統的 Web 應用中，我們往往會把<code>數據的變化</code>實時地<code>更新</code>到用戶界面中，於是每次數據的微小變動都會引起 <code>DOM樹</code> 的<code>重新渲染</code>。但是直接操作<code>DOM</code>的是很慢的，其元素非常巨大，頁面的<code>性能問題</code>常常會因為操作<code>DOM</code>而出現瓶頸，於是乎有什麼方法可以讓操作DOM的效率提升呢? <code>ReactJs</code> 提出了 <strong><code>虛擬DOM</code></strong> 的概念</p> <h3 id="虛擬dom的介紹"><a href="#虛擬dom的介紹" class="header-anchor">#</a> 虛擬DOM的介紹</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> 虛擬<span class="token constant">DOM</span> 是 真實<span class="token constant">DOM</span> 的 <span class="token parameter">映射</span> <span class="token operator">=&gt;</span> 是將 真實<span class="token constant">DOM</span> 映射成樹形結構的 <span class="token constant">JS</span>物件<span class="token punctuation">,</span> 來描述 真實<span class="token constant">DOM</span> 的結構<span class="token punctuation">,</span> 樹結構中的 <span class="token constant">JS</span>物件 包含了對應的真實<span class="token constant">DOM</span>信息

<span class="token number">2.</span> 虛擬<span class="token constant">DOM</span> 最終還是會轉換成真實的 <span class="token constant">DOM</span><span class="token function">節點</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>首先看一個實例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 創建一個真實DOM</span>
<span class="token keyword">let</span> realDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token comment">// 記錄真實DOM裡有幾個屬性</span>
<span class="token keyword">let</span> realNum <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> realDOM<span class="token punctuation">)</span><span class="token punctuation">{</span>
    realNum<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token comment">// 創建一個虛擬DOM</span>
<span class="token keyword">let</span> virtualDOM <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token comment">// 記錄虛擬DOM裡有幾個屬性</span>
<span class="token keyword">let</span> virtualNum <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> virtualDOM<span class="token punctuation">)</span><span class="token punctuation">{</span>
    virtualNum<span class="token operator">++</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;realNum: &quot;</span><span class="token operator">+</span> realNum<span class="token punctuation">)</span> <span class="token comment">// =&gt; realNum: 314</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;virtualNum: &quot;</span><span class="token operator">+</span> virtualNum<span class="token punctuation">)</span> <span class="token comment">// virtualNum: 7</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><p>結果是 <strong><code>真實DOM</code></strong> 內的屬性遠遠多於 <strong><code>虛擬DOM</code></strong> 內的屬性, 所以 <strong><code>虛擬DOM</code></strong> 佔用的內存很少, 因為沒有<code>真實DOM</code>內的很多不相關內容, 因此運行速度更快, 這就能顯著提高我們的頁面性能;</p></li> <li><p>除了內存佔用小之外, <strong><code>虛擬DOM</code></strong> 還能配合 <strong><code>Diff算法</code></strong> 提高渲染的效率;</p></li> <li><p>下圖可以看出, DOM是樹狀結構從document根結點向下延伸，下面依附了許多子節點
<img src="data:image/png;base64,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" alt="dom-tree"></p></li> <li><p>我們很常利用js來操作DOM，當瀏覽器在更新畫面的時候會觸發 <strong><code>Reflow</code></strong> （回流）以及 <strong><code>Repaint</code></strong> （重繪）這兩個更新機制</p></li> <li><p>瀏覽器的渲染機制:</p></li></ul> <p><img src="/blog/assets/img/render.52b13d74.png" alt="dom-tree"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>上圖是瀏覽器解析網頁的示意圖，為方便理解，我們就簡單拆解成幾個步驟：
<span class="token number">1.</span> 從 <span class="token constant">HTML</span> 檔解析出 <span class="token constant">DOM</span> Tree
<span class="token number">2.</span> 從 <span class="token constant">CSS</span> 檔解析出 <span class="token constant">CSSOM</span> Tree
<span class="token number">3.</span> 兩者疊加後產生 Render Tree
<span class="token number">4.</span> Reflow：計算出 Render Tree 上各個元素的物理屬性，如位置、大小、及是否看得見（visible）
<span class="token number">5.</span> Repaint：將計算結果轉為實際的像素，畫到畫面上
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="reflow"><a href="#reflow" class="header-anchor">#</a> Reflow</h4> <ul><li>如同前述，這個步驟會由 Render Tree 的根結點出發，逐步計算出每一個元素的位置、大小，以及是否被其他元素遮擋等屬性，需要耗費大量的運算資源；也因為是要計算出這些屬性，只要是有可能牽扯到這些屬性的操作，都會觸發 <strong><code>Reflow</code></strong> ，例如：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> 設定 <span class="token constant">CSS</span> <span class="token literal-property property">屬性</span><span class="token operator">:</span>
    大小：width、height
    浮動：float
    定位：position
    …

<span class="token number">2.</span> <span class="token literal-property property">使用者進行互動</span><span class="token operator">:</span>
    調整瀏覽器視窗大小
    輸入框的內容變更

<span class="token number">3.</span> <span class="token literal-property property">JavaScript</span><span class="token operator">:</span>
    <span class="token constant">DOM</span> 操作
    動態載入 <span class="token constant">CSS</span> 樣式表
    取得元素的大小數值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>比較需要注意的是「取得元素的大小數值」這一項，由於 Reflow 的計算相對於其他步驟需要較多運算效能，當有 Reflow 的需求時，瀏覽器不會馬上執行，而是會將它放到內部的等待隊列中，當需要時（每一 frame）才批次執行，並清空隊列。
<ul><li>這裡的 frame 也就是 window.requestAnimationFrame() 的那個 幀數</li></ul></li></ul> <h4 id="repaint"><a href="#repaint" class="header-anchor">#</a> Repaint</h4> <ul><li><p>經過了 <code>Reflow</code> <strong><code>Repaint</code></strong> 的任務是要把計算結果轉換成螢幕上的實際像素顯示。相比於 <code>Reflow</code> <strong><code>Repaint</code></strong> 就單純多了，任何可見元素的樣式變更，最後都必然需要重新繪製到畫面上，這是難以避免的效能開銷。</p></li> <li><p>前端框架在設計與實作上，會先將原本的 DOM 結構複製一份出來，但不會完整複製 DOM 當中的所有資訊，只會複製跟畫面渲染高度相關的資訊，譬如 tag (HTML tag)、props (tag 當中的資訊)與 children (子節點資訊) 等，利用 JavaScrip 物件的資料結構來儲存。, 虛擬DOM的結構:</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;header&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;title&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;content&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lemon&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如介紹中所寫: &quot;虛擬DOM 是 真實DOM 的 映射 =&gt; 是將 真實DOM 映射成樹形結構的 JS物件, 來描述 真實DOM 的結構, 樹結構中的 JS物件 包含了對應的真實DOM信息&quot;, 它是由JavaScript模擬出來的物件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>當頁面中的數據發生變化時, 沒有 <strong><code>虛擬DOM</code></strong> 的做法是: 重新渲染整個 DOM 樹; 而在有了 <strong><code>虛擬DOM</code></strong> 之後, 每當有事件產生，或是資料變動的時候，前端框架會先建立一個新的 <strong><code>虛擬DOM</code></strong>  ，接著，計算出新舊 <strong><code>虛擬DOM</code></strong>  之間的差別，最後才會操作真正的 <code>DOM</code>，並僅僅操作有變動的部分，藉此避免不必要的 <code>reflow</code> 或 <code>repaint</code> 以提升效能。</li></ul> <h4 id="diff算法"><a href="#diff算法" class="header-anchor">#</a> Diff算法</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>其中非常重要的一點: 開發者可以透過 &quot;key&quot; 的標記，來判斷畫面有無需要更動, 透過 &quot;key&quot; 的標記， Diff算法可以知道哪些 elements 是原本就存在在舊 virtual DOM tree 之中，因此如果只是在同一層的位置改變，就不需要重新計算修改，藉此提升整體效能。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="jsx語法"><a href="#jsx語法" class="header-anchor">#</a> JSX語法</h2> <h3 id="需要知道的事情"><a href="#需要知道的事情" class="header-anchor">#</a> 需要知道的事情:</h3> <h4 id="自定義不需要引號-不然會被解析成字符串"><a href="#自定義不需要引號-不然會被解析成字符串" class="header-anchor">#</a> 自定義不需要引號, 不然會被解析成字符串:</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element_1 <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span> <span class="token comment">// 這樣就好</span>
<span class="token keyword">const</span> element_2 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;Hello, {name}&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// 不要寫成這樣</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="jsx支持多行虛擬dom-如果需要換行-使用-包裹-防止未知錯誤"><a href="#jsx支持多行虛擬dom-如果需要換行-使用-包裹-防止未知錯誤" class="header-anchor">#</a> jsx支持多行虛擬DOM, 如果需要換行, 使用()包裹, 防止未知錯誤</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 較好的寫法: 👇🏻</span>
<span class="token keyword">const</span> element_3 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 較差的寫法: 👇🏻</span>
<span class="token keyword">const</span> element_4 <span class="token operator">=</span> 
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="虛擬dom只能存在一個根標籤"><a href="#虛擬dom只能存在一個根標籤" class="header-anchor">#</a> 虛擬DOM只能存在一個根標籤:</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 正確寫法: 👇🏻</span>
<span class="token keyword">const</span> element_5 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 錯誤寫法: 👇🏻 會報錯</span>
<span class="token keyword">const</span> element_6 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="設定行內樣式"><a href="#設定行內樣式" class="header-anchor">#</a> 設定行內樣式 :</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element_7 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>文字<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">// 會顯示紅色的文字</span>
<span class="token punctuation">)</span>

<span class="token comment">// 變數寫法: 👇🏻</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">'skyblue'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element_8 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> color<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>文字<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">// 會顯示藍色的文字</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="react元素樣式名使用小駝峰寫法"><a href="#react元素樣式名使用小駝峰寫法" class="header-anchor">#</a> React元素樣式名使用小駝峰寫法</h4> <h4 id="class-名稱被-classname-替代"><a href="#class-名稱被-classname-替代" class="header-anchor">#</a> class 名稱被 className 替代:</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element_9 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'test'</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">fontSize</span><span class="token operator">:</span><span class="token string">'40px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>文字<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">// font-size =&gt; fontSize</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="標籤必須閉合-無論單雙標籤"><a href="#標籤必須閉合-無論單雙標籤" class="header-anchor">#</a> 標籤必須閉合 無論單雙標籤</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element_10 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;https://cdn-origin.cool-style.com.tw/cool/2021/07/phpaIjYSR.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span> 
    <span class="token comment">// 這樣寫會報錯❌❌❌❌</span>
<span class="token punctuation">)</span>

<span class="token comment">// 正確寫法: </span>
<span class="token keyword">const</span> element_11 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;https://cdn-origin.cool-style.com.tw/cool/2021/07/phpaIjYSR.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token comment">// 尾部一定要加反斜線:  /</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>在下面這個範例中，我們宣告一個名為 name 的變數，並在 JSX 中透過將其名稱包在大括號中使用：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Josh Perez'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>你可以在 JSX 的大括號中寫入任何合法的 JavaScript expression(會回傳結果)。舉例來說，2 + 2、user.firstName 以及 formatName(user) 都是合法的 JavaScript expression。</p></div> <p>接下來的範例中，我們將嵌入呼叫 JavaScript function (formatName(user)) 的回傳值到一個 p標籤 中。</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formatName</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> user<span class="token punctuation">.</span>firstName<span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Harper'</span><span class="token punctuation">,</span>
<span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Perez'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
    Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function">formatName</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">!</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="jsx-本身也是-expression"><a href="#jsx-本身也是-expression" class="header-anchor">#</a> JSX 本身也是 Expression</h4> <ul><li>在編譯之後，JSX expressions 就變成了一般的 JavaScript function 呼叫並回傳 JavaScript 物件。 這表示你也可以在 if 跟 for 迴圈中使用 JSX，將其指定到一個變數，使用 JSX 作為參數並由 function 中回傳。</li></ul> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function">formatName</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> Stranger<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="jsx-防範注入攻擊"><a href="#jsx-防範注入攻擊" class="header-anchor">#</a> JSX 防範注入攻擊</h4> <p>在 JSX 之中可以安全的直接嵌入使用者輸入：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> title <span class="token operator">=</span> response<span class="token punctuation">.</span>potentiallyMaliciousInput<span class="token punctuation">;</span>
<span class="token comment">// 這是安全的：</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>React DOM 預設會在 render 之前 escape 所有嵌入在 JSX 中的變數。這保證你永遠不會不小心注入任何不是直接寫在你的應用程式中的東西。所有變數都會在 render 之前轉為字串，這可以避免 XSS（跨網站指令碼）攻擊。</li></ul> <h4 id="jsx-表示物件"><a href="#jsx-表示物件" class="header-anchor">#</a> JSX 表示物件</h4> <p>Babel 將 JSX 編譯為呼叫 React.createElement() 的程式。</p> <ul><li>下面這兩個例子完全相同：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
<span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">&quot;greeting&quot;</span><span class="token operator">&gt;</span>
    Hello<span class="token punctuation">,</span> World<span class="token operator">!</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
<span class="token string">'h1'</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">'Hello, World!'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>React.createElement() 會進行一些檢查以幫助你寫出沒有 bug 的程式，但基本上它會產生類似下面的物件：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意：這是簡化過的結構</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Hello, world!'</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>這種物件被稱呼為「React element」。你可以想像他們描述的是你想要在螢幕上看到的東西，React 會讀取這些物件並用這些描述來產生 DOM 並保持他們在最新狀態</li></ul> <h2 id="render-element"><a href="#render-element" class="header-anchor">#</a> Render Element</h2> <div class="language- extra-class"><pre><code>建立 React 應用程式最小的單位是 element。
</code></pre></div><ul><li>一個 element 描述你想要在螢幕上所看到的：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>與瀏覽器的 DOM element 不同，React element 是單純的 object，而且很容易被建立。React DOM 負責更新 DOM 來符合 React element。</p> <h3 id="render-element-到-dom-內"><a href="#render-element-到-dom-內" class="header-anchor">#</a> Render Element 到 DOM 內</h3> <ul><li>假設你的 HTML 檔案內有一個 div標籤：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>我們稱為這是一個「root」DOM node，因為所有在內的 element 都會透過 React DOM 做管理。</p></li> <li><p>使用 React 建立應用程式時，通常會有一個單一的 root DOM node。如果你想要整合 React 到現有的應用程式時，你可以根據你的需求獨立出多個 root DOM node。</p></li> <li><p>如果要 render 一個 React element 到 root DOM node，傳入兩者到 ReactDOM.createRoot()，接著傳入 React element 到 root.render()：</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在網頁上你會看見顯示「 Hello, world 」</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>結合JSX語法:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">'skyblue'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element_8 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> color<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>文字<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element_8<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在網頁上你會看見顯示「 文字 」, 並且文字的顏色是天藍色</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="更新被-render-的-element"><a href="#更新被-render-的-element" class="header-anchor">#</a> 更新被 Render 的 Element</h3> <ul><li><p>React element 是 immutable 的。一旦你建立一個 element，你不能改變它的 children 或是 attribute。Element 就像是電影中的一個幀：它代表特定時間點的 UI。</p></li> <li><p>憑藉我們迄今為止對 React 的認識，更新 UI 唯一的方式是建立一個新的 element，並且將它傳入到 root.render。</p></li> <li><p>思考以下這個 ticking clock 的範例：</p></li></ul> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
                It is <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span>tick<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 它從 setInterval() callback 每秒呼叫 root.render()。</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>在實踐中，大部分 React 應用程式只呼叫 root.render() 一次。我們後續會再學習如何將這些程式碼封裝到 stateful component, 以達到更新UI的效果</p></div> <h3 id="react-只更新必要的-element"><a href="#react-只更新必要的-element" class="header-anchor">#</a> React 只更新必要的 Element</h3> <ul><li><p>React DOM 會將 element 和它的 children 與先前的狀態做比較，並且只更新必要的 DOM 達到理想的狀態。</p></li> <li><p>根據上面的 ticking clock 範例, 你可以透過瀏覽器工具來檢測做驗證：
<img src="/blog/assets/img/granular-dom-updates.c158617e.gif" alt="clock"></p></li> <li><p>即使我們在每秒建立一個 element 描述整個 UI tree，只有內容更改的 text node 才會被 React DOM 更新。</p></li> <li><p>根據我們的經驗，應該思考 UI 在任何時候應該如何呈現，而不是隨著時間的推移改變它，就可以去所有消除錯誤。</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.aecd4755.js" defer></script><script src="/blog/assets/js/2.8521d118.js" defer></script><script src="/blog/assets/js/4.11f76de3.js" defer></script>
  </body>
</html>
