(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{308:function(s,t,a){"use strict";a.r(t);var e={mounted(){this.$page.lastUpdated="2023/02/13 10:05:12"}},n=a(10),r=Object(n.a)(e,(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"cookie-localstorage-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-localstorage-session"}},[s._v("#")]),s._v(" Cookie-localStorage-Session")]),s._v(" "),t("h2",{attrs:{id:"無狀態的-http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#無狀態的-http"}},[s._v("#")]),s._v(" 無狀態的 HTTP")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("無狀態伺服器是指一種把每個請求作為與之前任何請求都無關的獨立的事務的伺服器。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("這句話是什麼意思呢?")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("=> 小明喜歡帶著 MAC 去星巴克當潮潮，每周總是會擠出時間去星巴克喝咖啡用電腦，常常一坐就是一整天；從最一開始不知道要點什麼，逐漸喝到辦了隨行卡，還成為金星級會員；而正妹店員也從詢問「先生貴姓」，轉變成讀取隨行卡後詢問「小明您的隨行卡餘額還有 280 元喔」。\n\n注意到關鍵了嗎？對就是 隨行卡 (正妹店員?)。在沒有隨行卡的情況下，店員不知道小明是誰，對店員來說，每一位客人都是單次的事件，必須要透過隨行卡，才能知道小明是誰、剩下多少餘額，也就是小明在星巴克的「狀態」。\n\nHTTP 是一個無狀態的通訊協定，就如同星巴克的店員不會記住客人是誰一樣，伺服器不會記住使用者是誰，而是把每一次收到的請求都視為獨立的行為。\n\n如果是純粹展示靜態內容的網站，無狀態不會是個問題，反而是很棒的優點，因為客戶端、伺服器、資料庫都不需要儲存使用者狀態，也就省去了大量的儲存空間；但在複雜的網路應用，例如需要辨別使用者身分時，無狀態的通訊就會是個問題。\n\n\nsource: https://tw.alphacamp.co/blog/cookie-session-difference\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("問題:")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("我們都使用過Facebook, 並且只需要登入一次即可持續使用, 不論是手機端的關機或者電腦端的把頁面關掉, 再次進入Facebook的時候, 大多數都能維持登入的狀態並正常使用;\n\n想象一下: 在Facebook中我們需要更改個人資訊, 例如: 暱稱/照片/住址..., 或者要發佈新的文章, 使用這些功能的前提都是: **使用者必須登入** 否則都會跳轉到登入的頁面, 讓我們先登入再使用這些功能;\n而HTTP是無狀態的通訊協定, 這樣一來, 登入帳號應該是單次的事件, 發送下一次請求時, 伺服器並不會知道我們是否已經登入了帳號, 就會再次導向登入的頁面, 這裡似乎進入了死胡同\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("解決辦法:\n在 "),t("a",{attrs:{href:"'https://www.rfc-editor.org/rfc/rfc6265'"}},[s._v("HTTP 的規範 — 狀態管理機制")]),s._v(" 的章節中，規範了一套讓無狀態的 HTTP 能得知使用者狀態的方法；簡單來說，就是伺服器透過 Header 的屬性 "),t("code",[s._v("Set-Cookie")]),s._v("，把使用者的狀態紀錄成儲存在使用者電腦裡的 "),t("strong",[s._v("Cookie")]),s._v("，而瀏覽器在每一次發送請求時，都在 Header 中設定 Cookie 屬性，把 Cookie 帶上，伺服器就能藉由檢視 "),t("code",[s._v("Cookie")]),s._v(" 的內容，得知瀏覽器使用者的狀態；而像是「從登入到登出」、「從開始瀏覽網頁到 Cookie 失效」，或是任何伺服器能認出使用者狀態的時間區間，就叫做 "),t("strong",[s._v("Session")]),s._v("。")])]),s._v(" "),t("p",[s._v("例如瀏覽器回應的內容如下:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\nContent"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" text"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html\nSet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" yummy_cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("choco\nSet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" tasty_cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("strawberry\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("page content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("而瀏覽器就會依照 "),t("code",[s._v("Set-Cookie")]),s._v(" 的內容，建立、儲存指定的鍵值對（key-value pair）；當瀏覽器要發送請求時，就會將 Cookies 帶上:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sample_page"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" www"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" yummy_cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("choco"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" tasty_cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("strawberry\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("另外，前端開發者可以透過 document.cookie，在 JavaScript 中取得當前的 Cookies:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// yummy_cookie=choco; tasty_cookie=strawberry")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("接下來正式介紹 "),t("strong",[s._v("Cookie")]),s._v(":")]),s._v(" "),t("h2",{attrs:{id:"cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" Cookie")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v(" cookie，簡稱cookie，是使用者瀏覽網站時由網路伺服器建立並由使用者的網頁瀏覽器存放在使用者電腦或其他裝置上的小文字檔案。\nCookie使Web伺服器能夠在使用者的裝置上儲存狀態資訊（如添加到線上商店購物車中的商品）或跟蹤使用者的瀏覽活動（如點擊特定按鈕、登入或記錄歷史）。\n\n"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wikipedia\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"結構"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#結構"}},[s._v("#")]),s._v(" 結構:")]),s._v(" "),t("p",[s._v("Cookie的基本結構包括:")]),s._v(" "),t("ol",[t("li",[s._v("名；")]),s._v(" "),t("li",[s._v("值；")]),s._v(" "),t("li",[s._v("各種屬性。")])]),s._v(" "),t("h4",{attrs:{id:"cookie-的屬性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的屬性"}},[s._v("#")]),s._v(" Cookie 的屬性")]),s._v(" "),t("p",[s._v("Cookie 除了單純的鍵值對之外，伺服器也可以在 Set-Cookie 內標註這組資料的額外屬性:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("domain")]),s._v(": Cookie 的有效 domain，如果未設定，就會自動綁在執行 Set-Cookie 的 domain 下(所請求資源的域和路徑); 雖然可以自行設置，但其實也只能在一級/次級網域之間調整，寫到其他人的 domain 是寫不進去的。")]),s._v(" "),t("li",[t("code",[s._v("path")]),s._v(": 可以指定 Cookie 只在特定路徑下生效，未設定預設為 '/'")]),s._v(" "),t("li",[t("code",[s._v("Max-Age")]),s._v(": 有效期限，單位是秒；當數值為正數時有效，負數時為本次 Session 有效；0 為刪除 Cookie, 格式為Wdy, DD Mon YYYY HH:MM:SS GMT，或者Wdy, DD Mon YY HH:MM:SS GMT")]),s._v(" "),t("li",[t("code",[s._v("Expires")]),s._v(": 同上，只是指定的是時間點")]),s._v(" "),t("li",[t("code",[s._v("secure")]),s._v(": 安全，當這個屬性被設為 true 時，此 Cookie 就只會在「安全的協議」下傳輸，通常為 HTTPS")]),s._v(" "),t("li",[t("code",[s._v("HttpOnly")]),s._v(": 只能在網路傳輸中使用，當設為 true 時，此 Cookie 就無法在任何 JavaScript 程式碼中取得")])]),s._v(" "),t("p",[s._v("由於有 domain 值的設定，Cookie 是有指定使用範圍的；僅會在請求的目標網域為 Cookie 設定的 domain 時被帶上；透過 domain、path 限縮 Cookie 的使用範圍，以及 Max-Age 指定有效期限，建立在 HTTP 這樣無狀態協議上的應用程式，也就得以獲取、控制使用者狀態了。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("小提醒一下，有個容易讓人搞混的名詞，叫做「Session Cookies」，指的是沒有指定 "),t("code",[s._v("Expires")]),s._v(" 或 "),t("code",[s._v("Max-Age")]),s._v(" 的 Cookies，當瀏覽器關閉時，這些 Cookies 也會跟著消失，故得名。")])]),s._v(" "),t("h4",{attrs:{id:"cookie-的限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的限制"}},[s._v("#")]),s._v(" Cookie 的限制")]),s._v(" "),t("p",[s._v("由於 Cookie 是有大小數量限制的，單個最大 4K，一個 domain 下最多設置 20 個，不太可能將全部的使用者資料都儲存在瀏覽器端；同時，也因為對目標網域的每個請求都會帶上 Cookies，開發時千萬不要在 Cookie 中存入大量的資料，否則累計下來冗餘的資料傳輸非常可觀。")]),s._v(" "),t("p",[s._v("如果需要儲存更多的資料，或是省下每次傳輸都把 Cookie 帶好帶滿的流量浪費，就需要換成其他的實作方式了。實務上最常見的作法，是在 Cookie 中只存放能代表使用者是誰的 ID，而伺服器端則另外儲存每個 ID 的使用者狀態，當伺服器在收到請求時，藉由 Cookie 中的 ID，對應回使用者的狀態上，這樣就能認出使用者的身分了。")]),s._v(" "),t("p",[s._v("透過這樣簡單的機制，Cookie 的大小限制就不是問題了，但這種從 Cookie 中的 ID 換取狀態的模式，ID 如果被其他人獲取，使用者身分不就被他人使用了嗎？")]),s._v(" "),t("p",[s._v("對，確實有可能會被他人使用。但無論什麼方式，只要是需要知道使用者身分，使用者端自然會需要儲存資料；而只要是需要儲存資料，就都會有被盜取的風險。所以前面提到的 "),t("code",[s._v("Cookie")]),s._v(" 屬性中才會有 "),t("code",[s._v("secure")]),s._v("、"),t("code",[s._v("HttpOnly")]),s._v("，甚至實驗中的屬性 "),t("code",[s._v("SameSite")]),s._v(" 等等，透過正確的設置它們，來降低潛在的風險，盡可能的保護 Cookie 的存取權限，並提高傳輸過程的安全性。")]),s._v(" "),t("h2",{attrs:{id:"window-localstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window-localstorage"}},[s._v("#")]),s._v(" Window.localStorage")]),s._v(" "),t("p",[s._v("在瀏覽網站的時候，可以根據我們的喜好更換版面，即使重新整理或關閉瀏覽器後，再度開啟該網站時，設定居然都還存在！或者是購物網站，將物品加入購物車，但沒有結帳就關掉瀏覽器，過了很久之後，再次去買東西，購物車裡的物品也都還在，究竟是為什麼呢？其實透過後端做存取就可以解決這個問題了，但瀏覽器也有個神秘的儲存空間可以提供我們做使用，就是 localStorage。")]),s._v(" "),t("p",[s._v("source: https://5xruby.tw/posts/localStorage")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("localStorage")])]),s._v(" 為一唯讀屬性, 此屬性允許您存取目前文件(Document)隸屬網域來源的 Storage 物件; 與 sessionStorage 不同的是其儲存資料的可存取範圍為跨瀏覽頁狀態(Browser Sessions). "),t("code",[s._v("localStorage")]),s._v(" 的應用與 "),t("code",[s._v("sessionStorage")]),s._v(" 相似, 除了 "),t("code",[s._v("localStorage")]),s._v(" 的儲存資料並無到期的限制, 而 "),t("code",[s._v("sessionStorage")]),s._v(" 的儲存資料於目前瀏覽頁狀態結束的同時將一併被清除 — 也就是目前瀏覽器頁面被關閉的同時;")]),s._v(" "),t("p",[s._v("另應該注意：不論資料放在 "),t("code",[s._v("sessionStorage")]),s._v(" 還是 "),t("code",[s._v("localStorage")]),s._v("，都被限制在該網站的規範內，其他網站無法存取。")]),s._v(" "),t("p",[s._v("source: wikipedia")]),s._v(" "),t("h3",{attrs:{id:"localstorage-基本介紹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-基本介紹"}},[s._v("#")]),s._v(" localStorage 基本介紹")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  隨著瀏覽器不斷的進步，功能也越來越強大。在 "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTML5")]),s._v(" 出來之前，我們只能將最多 4K 的資料儲存在 cookie 裡面。現在 "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTML")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 中，新加入了 Local Storage 作為本地儲存來使用，一般瀏覽器容量為 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("M")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("不同瀏覽器支援的容量會有所不同"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"localstorage-優缺點"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-優缺點"}},[s._v("#")]),s._v(" localStorage 優缺點")]),s._v(" "),t("h4",{attrs:{id:"優點"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#優點"}},[s._v("#")]),s._v(" 優點:")]),s._v(" "),t("ul",[t("li",[s._v("增加本地儲存空間。")]),s._v(" "),t("li",[s._v("儲存資料方式，為 "),t("code",[s._v("key")]),s._v(" 和 "),t("code",[s._v("value。")])]),s._v(" "),t("li",[s._v("P.S. "),t("code",[s._v("key")]),s._v(" 和 "),t("code",[s._v("value")]),s._v(" 資料儲存型態為 "),t("code",[s._v("String")]),s._v("。")])]),s._v(" "),t("h4",{attrs:{id:"缺點"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缺點"}},[s._v("#")]),s._v(" 缺點:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("value")]),s._v(" 儲存型態只接受 "),t("code",[s._v("String")]),s._v("。")]),s._v(" "),t("li",[s._v("無痕或隱私模式下無法讀取。")]),s._v(" "),t("li",[s._v("資料量太多，存取時，容易照成畫面卡頓。")]),s._v(" "),t("li",[t("s",[s._v("有些比較較舊的瀏覽器版本(IE 8 以下)沒有支援。")]),s._v(" (R.I.P. Internet Explorer🕯)")])]),s._v(" "),t("h3",{attrs:{id:"localstorage-的使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-的使用方法"}},[s._v("#")]),s._v(" localStorage 的使用方法")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("localStorage.setItem('key', 'value')")]),s._v(" => 透過 setItem() 方法中將物件屬性的 "),t("code",[s._v("key")]),s._v(" 和 "),t("code",[s._v("value")]),s._v(" 當成參數傳入，我們就可以在 "),t("code",[s._v("storage")]),s._v(" 物件中加入屬性或修改原本的屬性內容。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myCat'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Tom'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("localStorage.getItem('key')")]),s._v(" => 透過 "),t("code",[s._v("getItem()")]),s._v(" 方法將屬性的 "),t("code",[s._v("key")]),s._v(" 當成參數傳入，我們就可以得到 "),t("code",[s._v("storage")]),s._v(" 物件對應的 "),t("code",[s._v("value")]),s._v(" 。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" cat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myCat'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Tom")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("localStorage.key()")]),s._v("：透過 "),t("code",[s._v("key()")]),s._v(" 方法中輸入屬性的順序位置，我們可以取得 "),t("code",[s._v("storage")]),s._v(" 物件中該位置的屬性 "),t("code",[s._v("key")]),s._v("，而位置順序和陣列表示方法一樣，由 0 開始。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 語法: ")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" aKeyName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" storage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 示例: ")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("populateStorage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bgcolor'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yellow'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'font'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Helvetica'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cats.png'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'image'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("localStorage.removeItem()")]),s._v("：透過 "),t("code",[s._v("removeItem()")]),s._v(" 方法，我們可以把指定的屬性從 storage 物件中移除。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myCat'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 無返回值")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("localStorage.clear()")]),s._v("：透過 "),t("code",[s._v("clear()")]),s._v(" 方法，我們可以直接把 "),t("code",[s._v("storage")]),s._v(" 中的所有屬性移除。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Clear all items")]),s._v("\nlocalStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 慎用!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"window-sessionstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window-sessionstorage"}},[s._v("#")]),s._v(" Window.sessionStorage")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("localStorage")])]),s._v(" 為一唯讀屬性, 此屬性允許您存取目前文件(Document)隸屬網域來源的 Storage 物件; 與 sessionStorage 不同的是其儲存資料的可存取範圍為跨瀏覽頁狀態(Browser Sessions). "),t("code",[s._v("localStorage")]),s._v(" 的應用與 "),t("code",[s._v("sessionStorage")]),s._v(" 相似, 除了 "),t("code",[s._v("localStorage")]),s._v(" 的儲存資料並無到期的限制, 而 "),t("code",[s._v("sessionStorage")]),s._v(" 的儲存資料於目前瀏覽頁狀態結束的同時將一併被清除 — 也就是目前瀏覽器頁面被關閉的同時.")]),s._v(" "),t("p",[s._v("值得注意的是不論 "),t("code",[s._v("localStorage")]),s._v(" 或者 "),t("code",[s._v("sessionStorage")]),s._v(" "),t("strong",[s._v("皆為專屬於目前瀏覽器頁面的通訊協定(Protocol).")])]),s._v(" "),t("p",[s._v("鍵值名稱和值皆為"),t("strong",[s._v("字串型式")]),s._v("(請留意, 當其為物件, 整數等將自動轉換為字串型式).")]),s._v(" "),t("p",[t("code",[s._v("sessionStorage")]),s._v(" 跟 "),t("code",[s._v("localStorage")]),s._v(" 幾乎一樣，且存放大小也是 "),t("strong",[s._v("5MB")]),s._v("，最大的不同點在於，它會受到分頁的限制，也就是說就算兩個分頁都處在同一個網站中，它們的 "),t("code",[s._v("sessionStorage")]),s._v(" 也不會共用，且只要把分頁關掉也同時會把 "),t("code",[s._v("sessionStorage")]),s._v(" 給刪除。")]),s._v(" "),t("p",[t("code",[s._v("sessionStorage")]),s._v(" 這樣的特性其實就有一個很實用的情境，那就是表單內容的儲存，在網頁中時常會有表單需要用戶填寫，例如基本資料、訂單資料、意見調查等等，但如果使用者在填寫過程中不慎離開頁面或是重新整理，那可就功虧一簣了。")]),s._v(" "),t("p",[s._v("這時候 "),t("code",[s._v("sessionStorage")]),s._v(" 就可以派上用場，把使用者填到一半的內容給儲存起來，只要使用者不是關掉分頁，離開再回來都可以保留填寫進度。而且就算使用者開了好幾個分頁進行不同訂單的填寫，分頁間的 "),t("code",[s._v("sessionStorage")]),s._v(" 資料也不會相互干擾。")]),s._v(" "),t("h3",{attrs:{id:"sessionstorage-的使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage-的使用方法"}},[s._v("#")]),s._v(" sessionStorage 的使用方法")]),s._v(" "),t("p",[s._v("sessionStorage 就連 methods 也都和 localStorage 是一樣的")]),s._v(" "),t("ul",[t("li",[s._v("將資料存到sessionStorage")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  sessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("從sessionStorage取得之前存的資料")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("從sessionStorage移除之前存的所有資料")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  sessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"比較"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比較"}},[s._v("#")]),s._v(" 比較")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}}),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("儲存時間")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("容量大小")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("Cookie")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("預設關閉瀏覽器失效；也可永久儲存")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("最多4kb")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("LocalStorage")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("永久儲存，需手動刪除")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("一般是5M")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("SessionStorage")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("關閉分頁或瀏覽器失效")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("一般是5M")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);